{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Vlad/Desktop/sliding-puzzle-app-main/sliding-puzzle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Vlad/Desktop/sliding-puzzle-app-main/sliding-puzzle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import useFirestore from'../../hooks/useFirestore';import{motion}from'framer-motion';import{auth,projectFirestore}from'../../firebase';import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageWrap=function ImageWrap(){var _useFirestore=useFirestore('users'),docs=_useFirestore.docs;var history=useHistory();// starts the game with the selected pict\nvar playPic=function playPic(url){history.push({pathname:'/game',search:\"?img=\".concat(url)});};//deletes the selected picture\nvar deletePic=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(clicked_id){var user,UserCol,userDat;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=auth.currentUser.uid;console.log(clicked_id);UserCol=projectFirestore.collection(\"users\").doc(user);_context.next=5;return UserCol.get();case 5:userDat=_context.sent.data();console.log(userDat);UserCol.update({images:userDat.images.filter(function(val){return val.url!=clicked_id;})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function deletePic(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"img-grid\",children:docs&&docs.map(function(doc){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(motion.div,{className:\"img-wrap\",layout:true,children:/*#__PURE__*/_jsx(motion.img,{src:doc.url,alt:\"uploaded pic\",initial:{opacity:0},animate:{opacity:1},transition:{delay:0.5}})}),/*#__PURE__*/_jsxs(motion.div,{className:\"imgOptions\",initial:{opacity:0},animate:{opacity:1},transition:{delay:0.5},children:[/*#__PURE__*/_jsx(\"button\",{className:\"imgOption\",onClick:function onClick(){return playPic(doc.url);},children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{className:\"imgOption\",onClick:function onClick(){return deletePic(doc.url);},children:\"Delete\"})]})]},doc);})});};export default ImageWrap;","map":{"version":3,"sources":["C:/Users/Vlad/Desktop/sliding-puzzle-app-main/sliding-puzzle-app/src/components/collection-components/ImgWrap.js"],"names":["React","useFirestore","motion","auth","projectFirestore","useHistory","ImageWrap","docs","history","playPic","url","push","pathname","search","deletePic","clicked_id","user","currentUser","uid","console","log","UserCol","collection","doc","get","userDat","data","update","images","filter","val","map","opacity","delay"],"mappings":"2WAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CACA,OAASC,MAAT,KAAuB,eAAvB,CACA,OAASC,IAAT,CAAeC,gBAAf,KAAsC,gBAAtC,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,kBAAiBL,YAAY,CAAC,OAAD,CAA7B,CAAQM,IAAR,eAAQA,IAAR,CACA,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CAEA;AACA,GAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,GAAD,CAAQ,CACtBF,OAAO,CAACG,IAAR,CAAa,CACXC,QAAQ,CAAE,OADC,CAEXC,MAAM,gBAAUH,GAAV,CAFK,CAAb,EAKD,CAND,CAQA;AACA,GAAMI,CAAAA,SAAS,0FAAG,iBAAOC,UAAP,2IACZC,IADY,CACLb,IAAI,CAACc,WAAL,CAAiBC,GADZ,CAEhBC,OAAO,CAACC,GAAR,CAAYL,UAAZ,EACMM,OAHU,CAGAjB,gBAAgB,CAACkB,UAAjB,CAA4B,OAA5B,EAAqCC,GAArC,CAAyCP,IAAzC,CAHA,uBAIOK,CAAAA,OAAO,CAACG,GAAR,EAJP,QAIVC,OAJU,eAIsBC,IAJtB,GAKhBP,OAAO,CAACC,GAAR,CAAYK,OAAZ,EACAJ,OAAO,CAACM,MAAR,CAAe,CACbC,MAAM,CAAEH,OAAO,CAACG,MAAR,CAAeC,MAAf,CAAsB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACpB,GAAJ,EAAWK,UAAf,EAAzB,CADK,CAAf,EANgB,sDAAH,kBAATD,CAAAA,SAAS,4CAAf,CAWA,mBACE,YAAK,SAAS,CAAC,UAAf,UACGP,IAAI,EAAIA,IAAI,CAACwB,GAAL,CAAS,SAAAR,GAAG,qBACnB,oCACA,KAAC,MAAD,CAAQ,GAAR,EAAY,SAAS,CAAC,UAAtB,CACE,MAAM,KADR,uBAGE,KAAC,MAAD,CAAQ,GAAR,EAAY,GAAG,CAAEA,GAAG,CAACb,GAArB,CAA0B,GAAG,CAAC,cAA9B,CACE,OAAO,CAAE,CAAEsB,OAAO,CAAE,CAAX,CADX,CAEE,OAAO,CAAE,CAAEA,OAAO,CAAE,CAAX,CAFX,CAGE,UAAU,CAAE,CAAEC,KAAK,CAAE,GAAT,CAHd,EAHF,EADA,cAWA,MAAC,MAAD,CAAQ,GAAR,EAAY,SAAS,CAAC,YAAtB,CACI,OAAO,CAAE,CAAED,OAAO,CAAE,CAAX,CADb,CAEI,OAAO,CAAE,CAAEA,OAAO,CAAE,CAAX,CAFb,CAGI,UAAU,CAAE,CAAEC,KAAK,CAAE,GAAT,CAHhB,wBAII,eAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAE,yBAAMxB,CAAAA,OAAO,CAACc,GAAG,CAACb,GAAL,CAAb,EAAvC,kBAJJ,cAKI,eAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAE,yBAAMI,CAAAA,SAAS,CAACS,GAAG,CAACb,GAAL,CAAf,EAAvC,oBALJ,GAXA,GAAWa,GAAX,CADmB,EAAZ,CADX,EADF,CAyBD,CAlDD,CAoDA,cAAejB,CAAAA,SAAf","sourcesContent":["import React from 'react';\nimport useFirestore from '../../hooks/useFirestore';\nimport { motion } from 'framer-motion';\nimport { auth, projectFirestore} from '../../firebase';\nimport { useHistory } from \"react-router-dom\";\n\n\nconst ImageWrap = () => {\n  const { docs } = useFirestore('users');\n  const history = useHistory();\n\n  // starts the game with the selected pict\n  const playPic = (url) =>{\n    history.push({\n      pathname: '/game',\n      search: `?img=${url}`\n    });\n\n  }\n\n  //deletes the selected picture\n  const deletePic = async (clicked_id)=>{\n    var user = auth.currentUser.uid\n    console.log(clicked_id)\n    const UserCol = projectFirestore.collection(\"users\").doc(user)\n    const userDat = (await UserCol.get()).data()\n    console.log(userDat)\n    UserCol.update({\n      images: userDat.images.filter(val => val.url != clicked_id)\n    })\n  }\n\n  return (\n    <div className=\"img-grid\">\n      {docs && docs.map(doc => (\n        <div  key={doc} >\n        <motion.div className=\"img-wrap\"\n          layout\n        >\n          <motion.img src={doc.url} alt=\"uploaded pic\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.5 }}\n          />\n          \n        </motion.div>\n        <motion.div className=\"imgOptions\" \n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.5 }}>\n            <button className=\"imgOption\" onClick={() => playPic(doc.url)}>Play</button>\n            <button className=\"imgOption\" onClick={() => deletePic(doc.url)}>Delete</button>\n          </motion.div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default ImageWrap;"]},"metadata":{},"sourceType":"module"}